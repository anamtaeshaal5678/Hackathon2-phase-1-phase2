# Phase IV — Spec-Driven Development (SP Constitution)

## SP-0: Constitution (Governing Rules)

This phase is governed by the following *non-negotiable rules*:

1. *Spec-First*:
   No infrastructure action is taken without a written specification.

2. *AI-Only Execution*:
   * Dockerfiles → generated by *Docker AI (Gordon)* or *Claude Code*
   * Helm charts → generated by *kubectl-ai / kagent*
   * Kubernetes ops → executed via *kubectl-ai / kagent*
   * Human role: reviewer, not implementer

3. *Local-Only Deployment*:
   * Minikube (single-node)
   * No cloud providers

4. *Reviewable Artifacts*:
   Prompts, outputs, errors, and fixes must be inspectable.

---

# SP-1: Specification (WHAT must exist)

## 1.1 System Specification
*System Name*: Cloud-Native Todo Chatbot (Phase IV)
*Deployment Target*: Local Kubernetes cluster (Minikube)

## 1.2 Functional Specification
1. Run frontend and backend as separate containers
2. Deploy both components to Kubernetes
3. Expose frontend via a Kubernetes Service
4. Allow backend scaling independently
5. Be installable using *Helm charts*

## 1.3 Non-Functional Specification
- Containerization: Docker (AI-generated)
- Orchestration: Kubernetes (Minikube)
- Packaging: Helm
- Ops: kubectl-ai, kagent
- Cost: Zero
- Coding: No manual coding

## 1.4 AI Tooling Specification
- Docker: Docker AI Agent (Gordon)
- Kubernetes Ops: kubectl-ai
- Cluster Intelligence: kagent
- Spec → Code: Antigravity (AI Agent)

---

# SP-2: Deployment Plan (HOW it will be achieved)
1. Generate Dockerfiles via AI
2. Build images usable by Minikube
3. Generate Helm charts via AI
4. Deploy via Helm
5. Operate cluster via AI
6. Detect and resolve errors via AI

---

# SP-3: Task Decomposition
## Task Group A — Containerization
* A1: Generate frontend Dockerfile (AI)
* A2: Generate backend Dockerfile (AI)
* A3: Build Docker images
* A4: Validate image startup

## Task Group B — Kubernetes Environment
* B1: Start Minikube
* B2: Configure Docker env for Minikube
* B3: Validate cluster access

## Task Group C — Helm Charts
* C1: Generate backend Helm chart (AI)
* C2: Generate frontend Helm chart (AI)
* C3: Parameterize replicas, ports, env vars
* C4: Validate Helm install

## Task Group D — AI-Assisted Operations
* D1: Deploy frontend with kubectl-ai
* D2: Scale backend via kubectl-ai
* D3: Analyze cluster health via kagent

## Task Group E — Error Handling & Recovery
* E1: Detect failures
* E2: Diagnose via AI
* E3: Regenerate or patch via AI
* E4: Redeploy
